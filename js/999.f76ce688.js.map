{"version":3,"file":"js/999.f76ce688.js","mappings":"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","sources":["webpack://bos-designer/./src/views/Home/scheduleBreak/event.vue","webpack://bos-designer/src/views/Home/scheduleBreak/event.vue","webpack://bos-designer/./src/views/Home/scheduleBreak/event.vue?0718","webpack://bos-designer/./src/views/Home/scheduleBreak/event.vue?0a6f"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('main',{staticClass:\"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]\"},[_c('C-Back-Nav',{attrs:{\"title\":`${_vm.GETTER_MECHANTNAME !== '' ? _vm.GETTER_MECHANTNAME + ' - ' : ''}事件`,\"routeTarget\":{name: 'ScheduleBreak'}}}),_c('section',{staticClass:\"relative z-0 mt-[52px] p-3\"},[_c('p',{staticClass:\"my-2 text-center\"},[_vm._v(\"新增事件\")]),_c('ValidationObserver',{ref:\"orderForm\"},[_c('div',{staticClass:\"my-2 flex items-center gap-2 text-left\"},[_c('p',{staticClass:\"w-3/12\"},[_vm._v(\"時間\")]),_c('div',{staticClass:\"flex w-9/12 gap-1\"},[_c('ValidationProvider',{ref:\"orderDate\",staticClass:\"w-3/5\",attrs:{\"name\":\"日期\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ errors }){return [_c('VCCalendarSelect',{attrs:{\"min-date\":new Date(),\"placeholder\":'選擇日期',\"errors\":errors},model:{value:(_vm.orderDate),callback:function ($$v) {_vm.orderDate=$$v},expression:\"orderDate\"}})]}}])}),_c('ValidationProvider',{ref:\"timeList\",staticClass:\"w-2/5\",attrs:{\"name\":\"時間\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ errors }){return [_c('C-Select',{staticClass:\"w-full\",attrs:{\"list\":_vm.timeList,\"placeholder\":'選擇時間',\"item-text\":\"name\",\"item-value\":\"id\",\"object-return\":\"\",\"errors\":errors},model:{value:(_vm.orderTime),callback:function ($$v) {_vm.orderTime=$$v},expression:\"orderTime\"}})]}}])})],1)]),_c('div',{staticClass:\"my-2 flex gap-2 text-left\"},[_c('label',{staticClass:\"w-3/12\"},[_vm._v(\"事件說明\")]),_c('div',{staticClass:\"relative flex w-9/12 flex-nowrap gap-1\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.remark),expression:\"remark\"}],staticClass:\"w-full rounded-md border border-primary/50\",attrs:{\"name\":\"remark\",\"id\":\"\",\"rows\":\"5\"},domProps:{\"value\":(_vm.remark)},on:{\"input\":function($event){if($event.target.composing)return;_vm.remark=$event.target.value}}}),(_vm.remark !== '')?_c('font-awesome-icon',{staticClass:\"absolute right-2 bottom-1 text-rose-600\",attrs:{\"icon\":\"fa-regular fa-xmark\"},on:{\"click\":function($event){_vm.remark = ''}}}):_vm._e()],1)]),_c('div',{staticClass:\"fixed bottom-[100px] w-[calc(100%-24px)]\"},[_c('div',{staticClass:\"w-full cursor-pointer bg-second py-2 px-4 text-white\",on:{\"click\":_vm.doFormValidate,\"keypress\":_vm.doFormValidate}},[_vm._v(\"新增事件\")])])])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <main class=\"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]\">\n    <C-Back-Nav :title=\"`${GETTER_MECHANTNAME !== '' ? GETTER_MECHANTNAME + ' - ' : ''}事件`\" :routeTarget=\"{name: 'ScheduleBreak'}\"></C-Back-Nav>\n    <section class=\"relative z-0 mt-[52px] p-3\">\n      <p class=\"my-2 text-center\">新增事件</p>\n      <ValidationObserver ref=\"orderForm\">\n        <div class=\"my-2 flex items-center gap-2 text-left\">\n            <p class=\"w-3/12\">時間</p>\n            <div class=\"flex w-9/12 gap-1\">\n              <ValidationProvider ref=\"orderDate\" name=\"日期\" rules=\"required\" v-slot=\"{ errors }\" class=\"w-3/5\">\n                <VCCalendarSelect :min-date=\"new Date()\" :placeholder=\"'選擇日期'\" v-model=\"orderDate\" :errors=\"errors\"></VCCalendarSelect>\n              </ValidationProvider>\n              <ValidationProvider ref=\"timeList\" name=\"時間\" rules=\"required\" v-slot=\"{ errors }\" class=\"w-2/5\">\n                <C-Select class=\"w-full\" :list=\"timeList\" v-model=\"orderTime\" :placeholder=\"'選擇時間'\" item-text=\"name\" item-value=\"id\" object-return :errors=\"errors\"></C-Select>\n              </ValidationProvider>\n            </div>\n        </div>\n\n       <!-- 事件說明 -->\n\n        <div class=\"my-2 flex gap-2 text-left\">\n            <label class=\"w-3/12\">事件說明</label>\n            <div class=\"relative flex w-9/12 flex-nowrap gap-1\">\n              <textarea name=\"remark\" id=\"\" v-model=\"remark\" rows=\"5\" class=\"w-full rounded-md border border-primary/50\"></textarea>\n              <font-awesome-icon v-if=\"remark !== ''\" @click=\"remark = ''\" icon=\"fa-regular fa-xmark\" class=\" absolute right-2 bottom-1 text-rose-600\"/>\n            </div>\n        </div>\n\n        <div class=\"fixed bottom-[100px] w-[calc(100%-24px)]\">\n          <div class=\"w-full cursor-pointer bg-second py-2 px-4 text-white\" @click=\"doFormValidate\" @keypress=\"doFormValidate\">新增事件</div>\n        </div>\n      </ValidationObserver>\n    </section>\n  </main>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex';\nimport VCCalendarSelect from '../../../components/general/VC-CalendarSelect.vue';\n\nexport default {\n  components: { VCCalendarSelect },\n  name: 'schedule-event',\n  description: '預約的首頁',\n  metaInfo: {\n    title: 'BeautyOS 設計師',\n    titleTemplate: '%s | 事件',\n  },\n  data() {\n    return {\n      orderDate: new Date(),\n      orderTime: '',\n      name: '',\n      cellphone: '',\n      remark: '',\n      isOrderDesigner: true,\n      timeList: [],\n    };\n  },\n  methods: {\n    doRoute(item) {\n      this.$router.push({ name: item.name });\n    },\n    async doFormValidate() {\n      const isValidForm = await this.$refs.orderForm.validate();\n      if (!isValidForm) return;\n      this.doDelivery();\n    },\n    async doDelivery() {\n      const submitForm = {\n        date: this.$dayjs(`${this.$dayjs(this.orderDate).format('YYYY-MM-DD')} ${this.orderTime.name}`).valueOf(),\n        text: this.remark,\n      };\n      const resp = await this.$api.createEvent({ input: submitForm });\n      const { errors } = resp.data;\n      if (errors) return;\n      this.fireSwalToOrder();\n      // await this.getTimeList();\n    },\n    fireSwalToOrder() {\n      this.$swal.fire({\n        title: ' ',\n        html:\n        `<div class=\"flex items-center justify-center my-10\">\n          <img src=\"/designer/assets/images/success.svg\" alt=\"\" class=\"inline-block mr-1\" /><span>新增成功</span>\n        </div>`,\n        confirmButtonText: '回列表',\n        showConfirmButton: true,\n        showCloseButton: true,\n        customClass: {\n          confirmButton: '!w-[144px] !rounded !bg-second !px-[14px] !py-2 !text-sm !text-white',\n        },\n      }).then((res) => {\n        if (res.isConfirmed) {\n          this.remark = '';\n          this.doRoute({ name: 'ScheduleBreak' });\n        }\n      });\n    },\n    async getTimeList() {\n      this.orderTime = ''; // 原本設計是只要重打就把時間清除為了把送出成功之後把資料清空\n      // adjust sbbmitForm for different api by isOrderDesigner\n      const submitForm = () => (this.isOrderDesigner ? {\n        date: this.$dayjs(this.orderDate).valueOf(),\n        storeId: this.currentMechantId,\n        designerId: this.userInfo.user.id,\n      } : {\n        storeId: this.currentMechantId,\n        date: this.$dayjs(this.orderDate).valueOf(),\n      });\n      // adjust response schema by isOrderDesigner\n      const respDataSchema = 'getBookingTimes';\n      const resp = await this.$api[respDataSchema](submitForm());\n      const { data, errors } = resp.data;\n      if (errors) return;\n      this.timeList = Array.isArray(data[respDataSchema])\n        ? data[respDataSchema].map((item, index) => ({\n          name: this.$dayjs(item.time).isValid() ? this.$dayjs(item.time).format('HH:mm') : item.time,\n          id: `bookingTime${index}`,\n          disabled: false,\n          // disabled: item.status !== '可預約',\n        }))\n        : [];\n    },\n  },\n  computed: {\n    ...mapState('userInfo', ['userInfo', 'currentMechantId']),\n    ...mapGetters('userInfo', ['GETTER_MECHANTNAME']),\n  },\n  watch: {\n    orderDate: {\n      immediate: true,\n      handler() {\n        this.getTimeList();\n      },\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./event.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./event.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./event.vue?vue&type=template&id=8c76ff4c&scoped=true&\"\nimport script from \"./event.vue?vue&type=script&lang=js&\"\nexport * from \"./event.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8c76ff4c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","GETTER_MECHANTNAME","name","_v","ref","scopedSlots","_u","key","fn","errors","Date","model","value","orderDate","callback","$$v","expression","timeList","orderTime","directives","rawName","remark","domProps","on","$event","target","composing","_e","doFormValidate","staticRenderFns","components","VCCalendarSelect","description","metaInfo","title","titleTemplate","data","cellphone","isOrderDesigner","methods","doRoute","date","text","input","fireSwalToOrder","html","confirmButtonText","showConfirmButton","showCloseButton","customClass","confirmButton","storeId","designerId","id","disabled","computed","watch","immediate","handler","component"],"sourceRoot":""}