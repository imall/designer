{"version":3,"file":"js/309.6c9da593.js","mappings":"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","sources":["webpack://bos-designer/./src/views/Home/customer/index.vue","webpack://bos-designer/src/views/Home/customer/index.vue","webpack://bos-designer/./src/views/Home/customer/index.vue?9aa6","webpack://bos-designer/./src/views/Home/customer/index.vue?b8cc","webpack://bos-designer/./node_modules/core-js/internals/delete-property-or-throw.js","webpack://bos-designer/./node_modules/core-js/modules/es.array.unshift.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('main',{staticClass:\"w-ful box-border h-full bg-white/80 pb-[84px]\"},[_c('C-Back-Nav',{attrs:{\"title\":'客戶資料查詢'}}),_c('section',{staticClass:\"relative z-0 mt-[52px] p-3\"},[_c('div',{staticClass:\"mb-4 flex items-center justify-between\"},[_c('C-Input',{staticClass:\"mb-0 mr-2 w-full\",attrs:{\"placeholder\":'搜尋姓名、手機、代號'},on:{\"input\":_vm.doInitSearch},scopedSlots:_vm._u([{key:\"endIcon\",fn:function(){return [(_vm.submitForm.searchInput !== '')?_c('font-awesome-icon',{staticClass:\"text-rose-600\",attrs:{\"icon\":\"fa-regular fa-xmark\"},on:{\"click\":function($event){(_vm.submitForm.searchInput = ''), _vm.doInitSearch()}}}):_vm._e(),_c('font-awesome-icon',{attrs:{\"icon\":\"fa-regular fa-magnifying-glass\"}})]},proxy:true}]),model:{value:(_vm.submitForm.searchInput),callback:function ($$v) {_vm.$set(_vm.submitForm, \"searchInput\", $$v)},expression:\"submitForm.searchInput\"}}),_c('font-awesome-icon',{staticClass:\"text-2xl\",attrs:{\"icon\":\"fa-regular fa-filter-list\"},on:{\"click\":function($event){_vm.isActiveFilter = !_vm.isActiveFilter}}})],1),_vm._l((_vm.resultList),function(item,index){return _c('div',{key:`result${index}`,staticClass:\"mb-4 flex items-center justify-between border-b border-solid border-primary/30\",on:{\"click\":function($event){return _vm.doRoute(item)},\"keypress\":function($event){return _vm.doRoute(item)}}},[_c('div',{staticClass:\"w-2/12\"},[_vm._v(_vm._s(+index + 1 > 9 ? +index + 1 : `0${+index + 1}`))]),_c('div',{staticClass:\"w-2/12 overflow-hidden text-ellipsis whitespace-nowrap\"},[_vm._v(\" \"+_vm._s(item.name ? item.name : \"--\")+\" \")]),_c('div',{staticClass:\"w-4/12\"},[_vm._v(_vm._s(item.cellphone))]),_c('div',{staticClass:\"w-3/12 text-right\"},[(item.birthday)?_c('span',[_vm._v(\" \"+_vm._s(item.birthday.year && item.birthday.year !== \"0\" ? `${item.birthday.year}/` : \"\")+_vm._s(item.birthday.month && item.birthday.month !== \"0\" ? `${item.birthday.month}/` : \"--.\")+_vm._s(item.birthday.day && item.birthday.day !== \"0\" ? item.birthday.day : \"--\")+\" \")]):_vm._e()]),_c('font-awesome-icon',{staticClass:\"w-1/12\",attrs:{\"icon\":\"fa-solid fa-angle-right\"}})],1)})],2),_c('C-Filter-Wrap',{attrs:{\"searchAdvanceCtx\":_vm.searchAdvanceCtx},on:{\"doFunction\":function($event){return _vm.doInitSearch(true)},\"clearFunction\":_vm.clearSearchAdvanceCtx},model:{value:(_vm.isActiveFilter),callback:function ($$v) {_vm.isActiveFilter=$$v},expression:\"isActiveFilter\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <main class=\"w-ful box-border h-full bg-white/80 pb-[84px]\">\n    <C-Back-Nav :title=\"'客戶資料查詢'\"></C-Back-Nav>\n    <section class=\"relative z-0 mt-[52px] p-3\">\n      <div class=\"mb-4 flex items-center justify-between\">\n        <C-Input\n          v-model=\"submitForm.searchInput\"\n          @input=\"doInitSearch\"\n          :placeholder=\"'搜尋姓名、手機、代號'\"\n          class=\"mb-0 mr-2 w-full\"\n        >\n          <template v-slot:endIcon>\n            <font-awesome-icon\n              v-if=\"submitForm.searchInput !== ''\"\n              @click=\"(submitForm.searchInput = ''), doInitSearch()\"\n              icon=\"fa-regular fa-xmark\"\n              class=\"text-rose-600\"\n            />\n            <font-awesome-icon icon=\"fa-regular fa-magnifying-glass\" />\n          </template>\n        </C-Input>\n        <font-awesome-icon\n          icon=\"fa-regular fa-filter-list\"\n          class=\"text-2xl\"\n          @click=\"isActiveFilter = !isActiveFilter\"\n        />\n      </div>\n      <!-- eslint-disable-next-line -->\n      <div\n        v-for=\"(item, index) in resultList\"\n        :key=\"`result${index}`\"\n        class=\"mb-4 flex items-center justify-between border-b border-solid border-primary/30\"\n        @click=\"doRoute(item)\"\n        @keypress=\"doRoute(item)\"\n      >\n        <div class=\"w-2/12\">{{ +index + 1 > 9 ? +index + 1 : `0${+index + 1}` }}</div>\n        <div class=\"w-2/12 overflow-hidden text-ellipsis whitespace-nowrap\">\n          {{ item.name ? item.name : \"--\" }}\n        </div>\n        <div class=\"w-4/12\">{{ item.cellphone }}</div>\n        <div class=\"w-3/12 text-right\">\n          <span v-if=\"item.birthday\">\n            {{ item.birthday.year && item.birthday.year !== \"0\" ? `${item.birthday.year}/` : \"\"\n            }}{{\n              item.birthday.month && item.birthday.month !== \"0\"\n                ? `${item.birthday.month}/`\n                : \"--.\"\n            }}{{ item.birthday.day && item.birthday.day !== \"0\" ? item.birthday.day : \"--\" }}\n          </span>\n        </div>\n        <font-awesome-icon icon=\"fa-solid fa-angle-right\" class=\"w-1/12\" />\n      </div>\n    </section>\n\n    <C-Filter-Wrap\n      v-model=\"isActiveFilter\"\n      :searchAdvanceCtx=\"searchAdvanceCtx\"\n      @doFunction=\"doInitSearch(true)\"\n      @clearFunction=\"clearSearchAdvanceCtx\"\n    ></C-Filter-Wrap>\n  </main>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\n// eslint-disable-next-line no-unused-vars\nimport month from '@/assets/constant/month';\n\nconst searchAdvanceCtxTemplate = {\n  year: '',\n  month: '',\n  day: '',\n  customerIsCome: null,\n  consumptionRange: {\n    startDate: '',\n    endDate: '',\n  },\n  baseDateRange: {\n    baseDate: '',\n    toDate: '',\n    dayNumber: '',\n  },\n  designer: {\n    latestDesignerSelected: '',\n    latestDesigner: [{ name: '請選擇', id: '' }],\n    preferDesignerSelected: '',\n    preferDesigner: [{ name: '請選擇', id: '' }],\n  },\n};\nexport default {\n  name: 'customer-index',\n  description: '客戶資料查詢的首頁',\n  metaInfo: {\n    title: 'BeautyOS 設計師',\n    titleTemplate: '%s | 客戶資料查詢',\n  },\n  mounted() {\n    this.init();\n  },\n  // 離開頁面取消監聽事件\n  beforeDestroy() {\n    window.removeEventListener('scroll', this.scrollDoSearch);\n  },\n  data() {\n    return {\n      isActiveFilter: false,\n      submitForm: {\n        searchInput: '',\n        pageOffset: 0,\n        isEnd: false,\n      },\n      totalPage: 0,\n      isGetting: false,\n      searchAdvanceCtx: {\n        year: '',\n        month: '',\n        day: '',\n        customerIsCome: null,\n        consumptionRange: {\n          startDate: '',\n          endDate: '',\n        },\n        baseDateRange: {\n          baseDate: '',\n          toDate: '',\n          dayNumber: '',\n        },\n        designer: {\n          latestDesignerSelected: '',\n          latestDesigner: [],\n          preferDesignerSelected: '',\n          preferDesigner: [],\n        },\n      },\n      resultList: [],\n      isloading: false,\n    };\n  },\n  methods: {\n    async init() {\n      await this.doSearch();\n      await this.getAllDesigner();\n    },\n    async clearSearchAdvanceCtx() {\n      this.searchAdvanceCtx = JSON.parse(JSON.stringify(searchAdvanceCtxTemplate));\n    },\n    doRoute(item) {\n      this.$router.push({ name: 'Customer-UserInfo', query: { id: item.id } });\n    },\n    // 搜尋框搜尋\n    doInitSearch(type) {\n      const lastTimeVal = this.submitForm.searchInput;\n      setTimeout(\n        () => {\n          if (lastTimeVal === this.submitForm.searchInput) {\n            this.submitForm.pageOffset = 0;\n            this.doSearch();\n          }\n        },\n        type ? 0 : 500,\n      );\n    },\n    async doSearch() {\n      const submitForm = {\n        // merchantId: this.currentMechantId,\n        keyword: this.submitForm.searchInput,\n        pageOffset: this.submitForm.pageOffset,\n        pageLimit: 20,\n        customerIsCome: this.searchAdvanceCtx.customerIsCome,\n        preferDesigner: this.searchAdvanceCtx.designer.preferDesignerSelected,\n        latestDesigner: this.searchAdvanceCtx.designer.latestDesignerSelected,\n      };\n      if (this.searchAdvanceCtx.year !== '' || this.searchAdvanceCtx.month !== '') {\n        submitForm.birthday = {};\n        submitForm.birthday.year = `${this.searchAdvanceCtx.year}`;\n        submitForm.birthday.month = month.find((item) => item.label === this.searchAdvanceCtx.month)\n          ? month.find((item) => item.label === this.searchAdvanceCtx.month).value\n          : '';\n        submitForm.birthday.day = '';\n      }\n\n      if (this.searchAdvanceCtx.consumptionRange.startDate !== '') {\n        submitForm.consumptionRange = {};\n        submitForm.consumptionRange.startDate = this.searchAdvanceCtx.consumptionRange.startDate;\n        submitForm.consumptionRange.endDate = this.searchAdvanceCtx.consumptionRange.endDate;\n      }\n      if (this.searchAdvanceCtx.baseDateRange.baseDate !== '') {\n        submitForm.baseDateRange = {};\n        submitForm.baseDateRange.baseDate = this.searchAdvanceCtx.baseDateRange.baseDate;\n      }\n      if (this.searchAdvanceCtx.baseDateRange.toDate !== '') {\n        if (submitForm.baseDateRange) {\n          submitForm.baseDateRange.toDate = this.searchAdvanceCtx.baseDateRange.toDate;\n        } else {\n          submitForm.baseDateRange = {};\n          submitForm.baseDateRange.toDate = this.searchAdvanceCtx.baseDateRange.toDate;\n        }\n      }\n      if (this.searchAdvanceCtx.baseDateRange.dayNumber !== '') {\n        if (submitForm.baseDateRange) {\n          submitForm.baseDateRange.dayNumber = Number(\n            this.searchAdvanceCtx.baseDateRange.dayNumber,\n          );\n        } else {\n          submitForm.baseDateRange = {};\n          submitForm.baseDateRange.dayNumber = Number(\n            this.searchAdvanceCtx.baseDateRange.dayNumber,\n          );\n        }\n      }\n      const resp = await this.$api.customersWithoutSorting(submitForm);\n      const { data, errors } = resp.data;\n\n      if (errors) return;\n\n      this.totalPage = Math.ceil(data.customersWithoutSorting.totalCount / 20) - 1;\n      this.submitForm.isEnd = Math.ceil(data.customersWithoutSorting.totalCount / 20) === 1;\n      this.resultList = data.customersWithoutSorting.customers;\n\n      if (this.submitForm.pageOffset < this.totalPage) window.addEventListener('scroll', this.scrollDoSearch);\n      this.isActiveFilter = false;\n    },\n    // 滾動加載\n    async scrollDoSearch() {\n      const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n      const windowHeight = document.documentElement.clientHeight || document.body.clientHeight;\n      const scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;\n\n      if (\n        !this.submitForm.isEnd\n        && !this.isGetting\n        && scrollTop + windowHeight >= scrollHeight - 50\n      ) {\n        this.isGetting = true;\n        this.submitForm.pageOffset += 1;\n\n        if (this.submitForm.pageOffset >= this.totalPage) {\n          this.submitForm.isEnd = true;\n          window.removeEventListener('scroll', this.scrollDoSearch);\n        }\n\n        const submitForm = {\n          merchantId: this.currentMechantId,\n          keyword: this.submitForm.searchInput,\n          pageOffset: this.submitForm.pageOffset,\n          pageLimit: 20,\n        };\n\n        const resp = await this.$api.customers(submitForm);\n        const { data, errors } = resp.data;\n\n        if (errors) return;\n\n        this.isGetting = false;\n        this.resultList = this.resultList.concat(data.customers.customers);\n      }\n    },\n    async getAllDesigner() {\n      const ML_DESIGN = JSON.parse(localStorage.getItem('ML_DESIGN'));\n      const auth = ML_DESIGN.userAuthorizeList.filter((item) => item.pageName === '可查詢全店客資');\n      const input = {\n        MerchantId: ML_DESIGN.currentMechantId,\n        usagelimit: 'EMPLOYEE_LIST',\n      };\n      const thisUser = [\n        { id: '', name: '請選擇' },\n        {\n          id: ML_DESIGN.user.id,\n          name: ML_DESIGN.user.name,\n        },\n      ];\n\n      if (!auth[0].authority) {\n        this.searchAdvanceCtx.designer.latestDesigner = thisUser;\n        this.searchAdvanceCtx.designer.preferDesigner = thisUser;\n        searchAdvanceCtxTemplate.designer.latestDesigner = thisUser;\n        searchAdvanceCtxTemplate.designer.preferDesigner = thisUser;\n      } else {\n        const resp = await this.$api.users(input);\n        const { data, errors } = resp.data;\n        if (errors) return;\n        data.users.users.unshift({ id: '', name: '請選擇' });\n        this.searchAdvanceCtx.designer.latestDesigner = data.users.users;\n        this.searchAdvanceCtx.designer.preferDesigner = data.users.users;\n        searchAdvanceCtxTemplate.designer.latestDesigner = data.users.users;\n        searchAdvanceCtxTemplate.designer.preferDesigner = data.users.users;\n      }\n    },\n  },\n  computed: {\n    ...mapState('userInfo', ['userInfo', 'currentMechantId']),\n    isReviewResult() {\n      return this.reviewResult.length;\n    },\n    isOrderResult() {\n      return this.orderResult.length;\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f7fbf3ae&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar SILENT_ON_NON_WRITABLE_LENGTH = !function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: INCORRECT_RESULT || SILENT_ON_NON_WRITABLE_LENGTH }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","doInitSearch","scopedSlots","_u","key","fn","submitForm","searchInput","$event","_e","proxy","model","value","callback","$$v","$set","expression","isActiveFilter","_l","resultList","item","index","doRoute","_v","_s","name","cellphone","birthday","year","month","day","searchAdvanceCtx","clearSearchAdvanceCtx","staticRenderFns","searchAdvanceCtxTemplate","customerIsCome","consumptionRange","startDate","endDate","baseDateRange","baseDate","toDate","dayNumber","designer","latestDesignerSelected","latestDesigner","id","preferDesignerSelected","preferDesigner","description","metaInfo","title","titleTemplate","mounted","beforeDestroy","window","data","pageOffset","isEnd","totalPage","isGetting","isloading","methods","query","setTimeout","type","keyword","pageLimit","errors","scrollTop","merchantId","MerchantId","usagelimit","computed","isReviewResult","isOrderResult","component","tryToString","$TypeError","TypeError","module","exports","O","P","$","toObject","lengthOfArrayLike","setArrayLength","deletePropertyOrThrow","doesNotExceedSafeInteger","INCORRECT_RESULT","unshift","SILENT_ON_NON_WRITABLE_LENGTH","Object","defineProperty","writable","error","target","proto","arity","forced","len","argCount","arguments","length","k","to","j"],"sourceRoot":""}