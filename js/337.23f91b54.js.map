{"version":3,"file":"js/337.23f91b54.js","mappings":"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","sources":["webpack://bos-designer/./src/views/Home/punch/index.vue","webpack://bos-designer/src/views/Home/punch/index.vue","webpack://bos-designer/./src/views/Home/punch/index.vue?015c","webpack://bos-designer/./src/views/Home/punch/index.vue?5ba7"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('main',{staticClass:\"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]\"},[_c('C-Back-Nav',{attrs:{\"title\":`${_vm.currentMerchantName !== '' ? _vm.currentMerchantName + ' - ' : ''}打卡`}}),_c('section',{staticClass:\"relative z-0 mt-[52px] p-3\"},[_c('div',{staticClass:\"mb-4 text-right\"},[_c('div',{staticClass:\"inline-block w-fit cursor-pointer rounded-[10px] bg-primary px-2 py-1 text-white\",on:{\"click\":_vm.doRoute,\"keypress\":_vm.doRoute}},[_c('span',{staticClass:\"mr-[6px]\"},[_vm._v(\"打卡清單\")]),_c('font-awesome-icon',{attrs:{\"icon\":\"fa-regular fa-list\"}})],1)]),_c('div',{staticClass:\"mb-3 text-7xl text-primary\"},[_vm._v(\" \"+_vm._s(_vm._f(\"dateFmtHm\")(_vm.currentTime))+\" \")]),_c('div',{staticClass:\"text-sm font-medium text-primary\"},[_vm._v(\" \"+_vm._s(_vm._f(\"dateFmtROCMMDD\")(_vm.currentTime))+\" \"+_vm._s(_vm._f(\"dateFmtdd\")(_vm.currentTime))+\" \")]),_c('div',{staticClass:\"flex items-center justify-center gap-2\"},[_c('p',{staticClass:\"whitespace-nowrap font-bold\"},[_vm._v(\"位置狀態: \")]),_c('p',{class:[{ 'text-orange-500': _vm.locationInfo === '距離介於25公尺以及50公尺'},{ 'text-red-600': _vm.locationInfo === '距離大於50公尺' || _vm.locationInfo === '無GPS座標'}]},[_vm._v(_vm._s(_vm.locationInfo))]),_c('font-awesome-icon',{staticClass:\"cursor-pointer text-primary\",attrs:{\"icon\":\"fa-regular fa-arrows-rotate\"},on:{\"click\":_vm.reFreshLocation}})],1),_c('div',{staticClass:\"my-7 flex gap-2\"},[_c('div',{staticClass:\"w-full cursor-pointer bg-second p-4 text-white\",on:{\"click\":function($event){return _vm.doAttendance('CLOCKIN')},\"keypress\":function($event){return _vm.doAttendance('CLOCKIN')}}},[_vm._v(\"上班打卡\")]),_c('div',{staticClass:\"w-full cursor-pointer bg-second p-4 text-white\",on:{\"click\":function($event){return _vm.doAttendance('CLOCKOUT')},\"keypress\":function($event){return _vm.doAttendance('CLOCKOUT')}}},[_vm._v(\"下班打卡\")])]),(_vm.clockInRecordInList && _vm.isHasNotClockout)?_c('div',{staticClass:\"mb-7 flex gap-2\"},[_c('div',{staticClass:\"w-full cursor-pointer bg-second/80 p-4 text-white\",on:{\"click\":function($event){_vm.doOutPunch(true),_vm.doAttendance('BREAKSTART')},\"keypress\":function($event){_vm.doOutPunch(true),_vm.doAttendance('BREAKSTART')}}},[_vm._v(\"外出打卡\")]),_c('div',{staticClass:\"w-full cursor-pointer bg-second/80 p-4 text-white\",on:{\"click\":function($event){_vm.doOutPunch(false),_vm.doAttendance('BREAKEND')},\"keypress\":function($event){_vm.doOutPunch(false),_vm.doAttendance('BREAKEND')}}},[_vm._v(\"歸來打卡\")])]):_vm._e(),(_vm.isDailyClockInRecordHasClockInRecord)?_vm._l((_vm.dailyClockInRecord.clockInRecord),function(recordItem,index){return _c('div',{key:index,staticClass:\"text-left\",class:{'mb-4': _vm.isDailyClockInRecordHasClockInRecord}},[_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\"mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"上班時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(_vm._s(recordItem.in ? _vm.timstampToMinSec(recordItem.in['time']) : '尚未打卡'))])]),(recordItem.in)?_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\"mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"外出時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(\" \"+_vm._s(_vm.timstampListToMinSecConcatText( recordItem.breakRecord,'start') === '' ? '未有打卡紀錄' : _vm.timstampListToMinSecConcatText( recordItem.breakRecord,'start'))+\" \")])]):_vm._e(),(recordItem.in)?_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\"mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"歸來時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(\" \"+_vm._s(_vm.timstampListToMinSecConcatText( recordItem.breakRecord,'end') === ''? '未有打卡紀錄' : _vm.timstampListToMinSecConcatText( recordItem.breakRecord,'end'))+\" \")])]):_vm._e(),_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\"mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"下班時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(_vm._s(recordItem.out ? _vm.timstampToMinSec(recordItem.out['time']) : '尚未打卡'))])])])}):[_vm._m(0)],_c('hr',{staticClass:\"my-7 border bg-primary\"}),_c('div',{staticClass:\"text-left text-sm font-medium\"},[_c('div',{staticClass:\"flex items-baseline\"},[_c('p',{staticClass:\"min-w-[102px]\"},[_vm._v(\"本月總打卡天數:\")]),_c('p',{staticClass:\"mx-2 font-sans text-3xl\"},[_vm._v(_vm._s(_vm.monthlyAttendanceCount)),_c('span',{staticClass:\"ml-1 text-sm\"},[_vm._v(\"天\")])])]),_c('div',{staticClass:\"flex items-baseline\"},[_c('p',{staticClass:\"min-w-[102px]\"},[_vm._v(\"遲到總分鐘數: \")]),_c('p',{staticClass:\"mx-2 font-sans text-3xl text-rejectText\"},[_vm._v(_vm._s(_vm.monthlyAttendanceLateCount)),_c('small',{staticClass:\"ml-1 text-sm text-rejectText\"},[_vm._v(\"分鐘\")])])])])],2)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"text-left\"},[_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\"mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"上班時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(\"尚未打卡\")])]),_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\"mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"下班時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(\"尚未打卡\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <main class=\"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]\">\n    <C-Back-Nav :title=\"`${currentMerchantName !== '' ? currentMerchantName + ' - ' : ''}打卡`\"></C-Back-Nav>\n    <section class=\"relative z-0 mt-[52px] p-3\">\n      <div class=\"mb-4 text-right\">\n        <div class=\"inline-block w-fit cursor-pointer rounded-[10px] bg-primary px-2 py-1 text-white\" @click=\"doRoute\" @keypress=\"doRoute\">\n          <span class=\"mr-[6px]\">打卡清單</span>\n          <font-awesome-icon icon=\"fa-regular fa-list\" />\n        </div>\n      </div>\n\n      <div class=\" mb-3 text-7xl text-primary\">\n        {{currentTime | dateFmtHm}}\n      </div>\n      <div class=\" text-sm font-medium text-primary\">\n        {{currentTime | dateFmtROCMMDD}} {{currentTime | dateFmtdd}}\n      </div>\n      <div class=\"flex items-center justify-center gap-2\">\n        <p class=\"whitespace-nowrap font-bold\">位置狀態: </p>\n        <p :class=\"[{ 'text-orange-500': locationInfo === '距離介於25公尺以及50公尺'},{ 'text-red-600': locationInfo === '距離大於50公尺' || locationInfo === '無GPS座標'}]\">{{locationInfo}}</p>\n        <font-awesome-icon icon=\"fa-regular fa-arrows-rotate\" @click=\"reFreshLocation\" class=\" cursor-pointer text-primary\"/>\n      </div>\n\n      <div class=\"my-7 flex gap-2\">\n        <div class=\"w-full cursor-pointer bg-second p-4 text-white\" @click=\"doAttendance('CLOCKIN')\" @keypress=\"doAttendance('CLOCKIN')\">上班打卡</div>\n        <div class=\"w-full cursor-pointer bg-second p-4 text-white\" @click=\"doAttendance('CLOCKOUT')\" @keypress=\"doAttendance('CLOCKOUT')\">下班打卡</div>\n      </div>\n      <div class=\"mb-7 flex gap-2\" v-if=\"clockInRecordInList && isHasNotClockout\">\n        <div class=\"w-full cursor-pointer bg-second/80 p-4 text-white\" @click=\"doOutPunch(true),doAttendance('BREAKSTART')\" @keypress=\"doOutPunch(true),doAttendance('BREAKSTART')\">外出打卡</div>\n        <div class=\"w-full cursor-pointer bg-second/80  p-4 text-white\" @click=\"doOutPunch(false),doAttendance('BREAKEND')\" @keypress=\"doOutPunch(false),doAttendance('BREAKEND')\">歸來打卡</div>\n      </div>\n\n      <template v-if=\"isDailyClockInRecordHasClockInRecord\">\n        <div class=\"text-left\" v-for=\"(recordItem,index) in dailyClockInRecord.clockInRecord\" :key=\"index\" :class=\"{'mb-4': isDailyClockInRecordHasClockInRecord}\">\n        <p class=\"flex break-all\">\n          <span class=\" mr-2 whitespace-nowrap font-bold\">上班時間:</span>\n          <span class=\"inline-block w-full underline decoration-black/20\">{{recordItem.in ?  timstampToMinSec(recordItem.in['time']) : '尚未打卡'}}</span>\n        </p>\n        <p v-if=\"recordItem.in\" class=\"flex break-all\">\n          <span class=\" mr-2 whitespace-nowrap font-bold\">外出時間:</span>\n          <span class=\"inline-block w-full underline decoration-black/20\">\n            {{timstampListToMinSecConcatText( recordItem.breakRecord,'start') === '' ? '未有打卡紀錄' : timstampListToMinSecConcatText( recordItem.breakRecord,'start')}}\n          </span>\n        </p>\n        <p v-if=\"recordItem.in\" class=\"flex break-all\">\n          <span class=\" mr-2 whitespace-nowrap font-bold\">歸來時間:</span>\n          <span class=\"inline-block w-full underline decoration-black/20\">\n            {{timstampListToMinSecConcatText( recordItem.breakRecord,'end') === ''? '未有打卡紀錄' : timstampListToMinSecConcatText( recordItem.breakRecord,'end')}}\n          </span>\n        </p>\n        <p class=\"flex break-all\">\n          <span class=\" mr-2 whitespace-nowrap font-bold\">下班時間:</span>\n          <span class=\"inline-block w-full underline decoration-black/20\">{{recordItem.out ? timstampToMinSec(recordItem.out['time']) : '尚未打卡'}}</span>\n        </p>\n      </div>\n      </template>\n      <template v-else>\n        <div class=\"text-left\">\n          <p class=\"flex break-all\">\n            <span class=\" mr-2 whitespace-nowrap font-bold\">上班時間:</span>\n            <span class=\"inline-block w-full underline decoration-black/20\">尚未打卡</span>\n          </p>\n          <p class=\"flex break-all\">\n            <span class=\" mr-2 whitespace-nowrap font-bold\">下班時間:</span>\n            <span class=\"inline-block w-full underline decoration-black/20\">尚未打卡</span>\n          </p>\n        </div>\n      </template>\n\n      <hr class=\"my-7 border bg-primary\" />\n\n      <div class=\"text-left text-sm font-medium\">\n        <div class=\"flex items-baseline\">\n          <p class=\"min-w-[102px]\">本月總打卡天數:</p>\n          <p class=\"mx-2 font-sans text-3xl\">{{monthlyAttendanceCount}}<span class=\"ml-1 text-sm\">天</span></p>\n        </div>\n\n        <div class=\"flex items-baseline\">\n          <p class=\"min-w-[102px]\">遲到總分鐘數: </p>\n          <p class=\"mx-2 font-sans text-3xl text-rejectText\">{{monthlyAttendanceLateCount}}<small class=\"ml-1 text-sm text-rejectText\">分鐘</small></p>\n        </div>\n      </div>\n    </section>\n  </main>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\n\nexport default {\n  name: 'punch-index',\n  description: '打卡的首頁',\n  metaInfo: {\n    title: 'BeautyOS 設計師',\n    titleTemplate: '%s | 打卡',\n  },\n  data() {\n    return {\n      resultItem: {},\n      resultAttendance: {},\n      punchStart: '',\n      punchEnd: '',\n      outPunchStart: '',\n      outPunchEnd: '',\n      locationInfo: '',\n      // 時間\n      currentTimeIntervalKey: '',\n      currentTime: this.$dayjs().format('YYYY-MM-DD HH:mm:ss'),\n      dailyClockInRecord: {},\n    };\n  },\n  mounted() {\n    this.currentTimeIntervalKey = setInterval(() => {\n      this.currentTime = this.$dayjs().format('YYYY-MM-DD HH:mm:ss');\n    }, 1000);\n    this.init();\n  },\n  methods: {\n    async init() {\n      await Promise.all([this.getAttendanceRecords(), this.getDailyClockInRecord(), this.reFreshLocation()]).then(() => {});\n    },\n    async reFreshLocation() {\n      const { latitude, longitude } = await this.geoFindMe();\n      const resp = await this.$api.checkGPSStatus({ latitude: latitude ? `${latitude}` : latitude, longitude: longitude ? `${longitude}` : longitude });\n      const { data, errors } = resp.data;\n      if (errors) return;\n      const actions = new Map([\n        ['NULL', { locationInfo: '無GPS座標' }],\n        ['LOWERTHAN25', { locationInfo: '距離小於25公尺' }],\n        ['BETWEEN25AND50', { locationInfo: '距離介於25公尺以及50公尺' }],\n        ['MORETHAN50', { locationInfo: '距離大於50公尺' }],\n      ]);\n      this.locationInfo = actions.get(data.checkGPSStatus.status) ? actions.get(data.checkGPSStatus.status).locationInfo : '無GPS座標';\n    },\n    async getDailyClockInRecord() {\n      const resp = await this.$api.dailyClockInRecord({ date: this.$dayjs().valueOf(), designerId: this.userInfo.user.id });\n      const { data, errors } = resp.data;\n      if (errors) return;\n      const [dailyClockInRecord = {}] = data.dailyClockInRecord;\n      this.dailyClockInRecord = dailyClockInRecord;\n    },\n    async getAttendanceRecords() {\n      const sumbitAttendanceRecordsForm = {\n        userId: this.userInfo.user.id,\n        dateRange: {\n          startDate: this.$dayjs(new Date()).startOf('month').valueOf(),\n          endDate: this.$dayjs(new Date()).endOf('month').valueOf(),\n        },\n        pageLimit: 1000,\n      };\n      const resp = await this.$api.attendanceRecords(sumbitAttendanceRecordsForm);\n      const { data, errors } = resp.data;\n      if (errors) return;\n      this.resultAttendance = data.attendanceRecords;\n    },\n    doRoute() {\n      this.$router.push({ name: 'Punch-list' });\n    },\n    geoFindMe() {\n      return new Promise((resolve) => {\n        let { latitude, longitude } = {};\n        const success = (position) => {\n          latitude = position.coords.latitude;\n          longitude = position.coords.longitude;\n          resolve({ latitude, longitude });\n        };\n        const error = () => {\n          latitude = null;\n          longitude = null;\n          resolve({ latitude, longitude });\n        };\n        if (!navigator.geolocation) {\n          this.$swal.fire({\n            icon: 'warning',\n            title: '請開起與授權GPS定位功能',\n            showConfirmButton: true,\n            showCancelButton: true,\n          });\n          resolve({ latitude: null, longitude: null });\n        } else {\n          navigator.geolocation.getCurrentPosition(success, error);\n        }\n      });\n    },\n    async doAttendance(statusType) {\n      await this.reFreshLocation();\n      const { latitude, longitude } = await this.geoFindMe();\n      const resp = await this.$api.userClockIn({\n        userIds: [this.userInfo.user.id], status: statusType, checkinType: 'CELLPHONE', GPSLocation: latitude ? { latitude: `${latitude}`, longitude: `${longitude}` } : null,\n      });\n      const { data, errors } = resp.data;\n      await this.getAttendanceRecords();\n      if (errors) return;\n      await this.getDailyClockInRecord();\n      if (data.userClockIn) {\n        this.$swal.fire({\n          showCloseButton: true,\n          html:\n            `<div class=\"flex items-center justify-center my-10\">\n              <img src=\"/designer/assets/images/success.svg\" alt=\"\" class=\"inline-block mr-1\" /><span>打卡成功</span>\n            </div>`,\n          showConfirmButton: false,\n          timer: 3000,\n          timerProgressBar: true,\n        });\n      }\n    },\n    doOutPunch(status) {\n      if (status) {\n        this.outPunchStart = this.$dayjs().format('HH:mm');\n      } else {\n        this.outPunchEnd = this.$dayjs().format('HH:mm');\n      }\n    },\n  },\n  computed: {\n    ...mapState('userInfo', ['userInfo', 'currentMechantId']),\n    monthlyAttendanceCount() {\n      let count = 0;\n      if (this.resultAttendance[0] && Array.isArray(this.resultAttendance[0].attendanceRecord)) {\n        count = this.resultAttendance[0].attendanceRecord.filter((recordItem) => Object.prototype.hasOwnProperty.call(recordItem, 'clockInRecord') && Array.isArray(recordItem.clockInRecord) && recordItem.clockInRecord.length > 0).length;\n      }\n      return count;\n    },\n    monthlyAttendanceLateCount() {\n      let count = 0;\n      count = this.resultAttendance[0] ? this.resultAttendance[0].totalLateMinutes : 0;\n      return count;\n    },\n    currentMerchantName() {\n      const currentMerchant = this.userInfo?.user?.merchants.find((item) => item.id === this.currentMechantId);\n      return currentMerchant ? currentMerchant.name : '';\n    },\n    clockInRecordInList() {\n      let clockInRecordInListContent = '';\n      const { clockInRecord = [] } = this.dailyClockInRecord;\n      clockInRecordInListContent = clockInRecord.flatMap((RecordItem) => (RecordItem.in ? this.$dayjs(RecordItem.in).format('HH:mm') : '')).toString();\n      return clockInRecordInListContent;\n    },\n    timstampToMinSec() {\n      return (timestamp) => (this.$dayjs(timestamp).isValid() ? this.$dayjs(timestamp).format('HH:mm') : timestamp);\n    },\n    timstampListToMinSecConcatText() {\n      return (timstampList, type) => timstampList.flatMap((timstampListItem) => [timstampListItem[type] && this.$dayjs(timstampListItem[type].time).isValid() ? this.$dayjs(timstampListItem[type].time).format('HH:mm') : []]).toString();\n    },\n    isHasNotClockout() {\n      let isHasNotClockout = false;\n      const { clockInRecord = [] } = this.dailyClockInRecord;\n      isHasNotClockout = clockInRecord.some((clockInRecordItem) => clockInRecordItem && clockInRecordItem.out === null);\n      return isHasNotClockout;\n    },\n    isDailyClockInRecordHasClockInRecord() {\n      return this.dailyClockInRecord.clockInRecord && this.dailyClockInRecord.clockInRecord.length > 0;\n    },\n  },\n  beforeDestroy() {\n    clearInterval(this.currentTimeIntervalKey);\n  },\n};\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ebee59e4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","currentMerchantName","on","doRoute","_v","_s","_f","currentTime","class","locationInfo","reFreshLocation","$event","doAttendance","clockInRecordInList","isHasNotClockout","doOutPunch","_e","isDailyClockInRecordHasClockInRecord","_l","dailyClockInRecord","clockInRecord","recordItem","index","key","in","timstampToMinSec","timstampListToMinSecConcatText","breakRecord","out","_m","monthlyAttendanceCount","monthlyAttendanceLateCount","staticRenderFns","name","description","metaInfo","title","titleTemplate","data","resultItem","resultAttendance","punchStart","punchEnd","outPunchStart","outPunchEnd","currentTimeIntervalKey","mounted","methods","latitude","longitude","errors","date","designerId","userId","dateRange","startDate","endDate","pageLimit","geoFindMe","resolve","navigator","icon","showConfirmButton","showCancelButton","userIds","status","checkinType","GPSLocation","showCloseButton","html","timer","timerProgressBar","computed","count","clockInRecordInListContent","beforeDestroy","clearInterval","component"],"sourceRoot":""}