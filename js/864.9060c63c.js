"use strict";(self["webpackChunkbos_designer"]=self["webpackChunkbos_designer"]||[]).push([[864],{3864:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("main",{staticClass:"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]"},[t("C-Back-Nav",{attrs:{title:"設計師日報表",routeTarget:{name:"Report"}}}),t("section",{staticClass:"relative z-0 mt-[52px] p-3"},[t("div",{staticClass:"flex items-center gap-2"},[t("p",[e._v("日期：")]),t("vc-date-picker",{attrs:{mode:"date"},scopedSlots:e._u([{key:"default",fn:function({inputValue:a,inputEvents:i}){return[t("input",e._g({staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",domProps:{value:a}},i))]}}]),model:{value:e.searchDate,callback:function(t){e.searchDate=t},expression:"searchDate"}})],1),e._l(e.reviewResult,(function(a,i){return t("div",{key:i,staticClass:"mb-5 text-left text-sm"},[t("div",{staticClass:"my-4 flex items-center justify-between"},[t("div",{staticClass:"flex items-baseline"},[t("p",{staticClass:"mr-1 text-[24px] font-bold"},[e._v(e._s(e.currentMM)+"月")]),t("p",[e._v(e._s(e.currentDD)+"日")])]),t("div",[t("p",[e._v("設計師 "+e._s(a.user.name))])])]),t("div",[e._m(0,!0),e._l(a.orderRecord,(function(a,i){return t("div",{key:`orderRecordItem-${i}`,staticClass:"flex w-full items-center justify-center p-1"},[t("div",{staticClass:"w-1/5"},[e._v(e._s(a.orderNo))]),t("div",{staticClass:"w-1/5"},[e._v(e._s(a.category))]),t("div",{staticClass:"w-1/5"},[e._v(e._s(a.itemName))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-1/5"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.fakePerformance):a.fakePerformance))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-1/5"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.truthPerformance):a.truthPerformance))])])})),t("div",{staticClass:"flex w-full items-center justify-center p-1"},[t("div",{staticClass:"w-1/5"},[e._v("合計")]),t("div",{staticClass:"w-1/5"}),t("div",{staticClass:"w-1/5"}),t("div",{staticClass:"w-1/5 font-bold"},[e.priceDisplayOnDailyReportDefault.isPriceDisplayOnDailyReport?t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.totalFakePerformance):a.totalFakePerformance))]):e._e()]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-1/5 font-bold"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.totalTruthPerformance):a.totalTruthPerformance))])]),e._m(1,!0),t("ul",[!e.priceDisplayOnDailyReportDefault.isPriceDisplayOnDailyReport||0===a.currentDay.performanceFakeTotal&&0===a.tillNow.performanceFakeTotal?e._e():t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("金額(虛)")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.performanceFakeTotal):a.currentDay.performanceFakeTotal))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.performanceFakeTotal):a.tillNow.performanceFakeTotal))])]),e.isZeroValueHiddenOnDailyReport&&0===a.currentDay.performanceTruthTotal&&0===a.tillNow.performanceTruthTotal?e._e():t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("實業績")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.performanceTruthTotal):a.currentDay.performanceTruthTotal))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.performanceTruthTotal):a.tillNow.performanceTruthTotal))])]),e.isZeroValueHiddenOnDailyReport&&0===a.currentDay.performanceDesignateTruthTotal&&0===a.tillNow.performanceDesignateTruthTotal?e._e():t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("指定實業績")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.performanceDesignateTruthTotal):a.currentDay.performanceDesignateTruthTotal))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.performanceDesignateTruthTotal):a.tillNow.performanceDesignateTruthTotal))])]),t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("特殊抽成")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.performanceWithSpecialRake):a.currentDay.performanceWithSpecialRake))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.performanceWithSpecialRake):a.tillNow.performanceWithSpecialRake))])]),t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("店販金額")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.productFakeTotal):a.currentDay.productFakeTotal))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.productFakeTotal):a.tillNow.productFakeTotal))])]),t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("店販抽成")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.productRake):a.currentDay.productRake))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.productRake):a.tillNow.productRake))])]),t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("互助使用(不含點)")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(" "+e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.helperPaidPrice):a.currentDay.helperPaidPrice)+" ")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(" "+e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.helperPaidPrice):a.tillNow.helperPaidPrice)+" ")])]),t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("互助使用(點)")]),t("div",{staticClass:"col-span-3"},[t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.helperPaidPoint):a.currentDay.helperPaidPoint))]),e.priceDisplayOnDailyReportDefault.isHelperPointPriceDisplay?[e._v(" / "),t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(-1*a.currentDay.helperPaidPriceFromPoint):-1*a.currentDay.helperPaidPriceFromPoint))])]:e._e()],2),t("div",{staticClass:"col-span-3"},[t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.helperPaidPoint):a.tillNow.helperPaidPoint))]),e.priceDisplayOnDailyReportDefault.isHelperPointPriceDisplay?[e._v(" / "),t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(-1*a.tillNow.helperPaidPriceFromPoint):-1*a.tillNow.helperPaidPriceFromPoint))])]:e._e()],2)]),!e.isDisplayHelperRetrieveInDailyReport||0===a.currentDay.helpGetNoPoint&&0===a.tillNow.helpGetNoPoint?e._e():t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("互助獲得金額(不含點)")]),t("div",{staticClass:"col-span-3"},[e.priceDisplayOnDailyReportDefault.isHelperPointPriceDisplay?[t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(" "+e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.helpGetNoPoint):a.currentDay.helpGetNoPoint)+" ")])]:[e._v(" 0 ")]],2),t("div",{staticClass:"col-span-3"},[e.priceDisplayOnDailyReportDefault.isHelperPointPriceDisplay?[t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(" "+e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.helpGetNoPoint):a.tillNow.helpGetNoPoint)+" ")])]:[e._v(" 0 ")]],2)]),!e.isDisplayHelperRetrieveInDailyReport||0===a.currentDay.helperRetrievePoint&&0===a.tillNow.helperRetrievePoint?e._e():t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("互助獲得(點)點數/換算金額")]),t("div",{staticClass:"col-span-3"},[t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.helperRetrievePoint):a.currentDay.helperRetrievePoint))]),e.priceDisplayOnDailyReportDefault.isHelperPointPriceDisplay?[e._v(" / "),t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(" "+e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.helperRetrievePrice):a.currentDay.helperRetrievePrice))])]:e._e()],2),t("div",{staticClass:"col-span-3"},[t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.helperRetrievePoint):a.tillNow.helperRetrievePoint))]),e.priceDisplayOnDailyReportDefault.isHelperPointPriceDisplay?[e._v(" / "),t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.helperRetrievePrice):a.tillNow.helperRetrievePrice))])]:e._e()],2)]),e.isZeroValueHiddenOnDailyReport&&0===a.currentDay.orderTotalCount&&0===a.tillNow.orderTotalCount?e._e():t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("總客數")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.orderTotalCount):a.currentDay.orderTotalCount))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.orderTotalCount):a.tillNow.orderTotalCount))])]),e.isZeroValueHiddenOnDailyReport&&0===a.currentDay.designateOrderCount&&0===a.tillNow.designateOrderCountl?e._e():t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("指定客")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.designateOrderCount):a.currentDay.designateOrderCount))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.designateOrderCount):a.tillNow.designateOrderCount))])]),e.isZeroValueHiddenOnDailyReport&&0===a.currentDay.nonDesignateOrderCount&&0===a.tillNow.nonDesignateOrderCount?e._e():t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("不指定客")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.nonDesignateOrderCount):a.currentDay.nonDesignateOrderCount))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.nonDesignateOrderCount):a.tillNow.nonDesignateOrderCount))])]),!e.isZeroValueHiddenOnDailyReport||(e.countMath(a.currentDay.performanceFakeTotal,a.currentDay.orderTotalCount)||e.countMath(a.tillNow.performanceFakeTotal,a.tillNow.orderTotalCount))?t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("客單價")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.countMath(a.currentDay.performanceFakeTotal,a.currentDay.orderTotalCount)))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.countMath(a.tillNow.performanceFakeTotal,a.tillNow.orderTotalCount)))])]):e._e(),e.isZeroValueHiddenOnDailyReport&&0===a.currentDay.orderTypeCount&&0===a.tillNow.orderTypeCount?e._e():t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("客項次(服務)")]),t("div",{staticClass:"col-span-3"},[t("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.currentDay.orderTypeCount):a.currentDay.orderTypeCount))])]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(a.tillNow.orderTypeCount):a.tillNow.orderTypeCount))])]),!e.isZeroValueHiddenOnDailyReport||(e.countMath(a.currentDay.performanceFakeTotal,a.currentDay.orderTypeCount)||e.countMath(a.tillNow.performanceFakeTotal,a.tillNow.orderTypeCount))?t("li",{staticClass:"grid grid-cols-12 border-b border-b-[#aeaeae] py-1"},[t("div",{staticClass:"col-span-6"},[e._v("平均項次單價")]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.countMath(a.currentDay.performanceFakeTotal,a.currentDay.orderTypeCount)))]),t("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"col-span-3"},[e._v(e._s(e.countMath(a.tillNow.performanceFakeTotal,a.tillNow.orderTypeCount)))])]):e._e()])],2)])})),0===e.reviewResult.length?t("p",{staticClass:"mt-10 text-center text-sm text-stone-400"},[e._v("查無資料")]):e._e()],2)],1)},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex w-full items-center justify-center border-b border-solid border-primary/50 bg-[#08424c]/80 p-1 text-white"},[t("div",{staticClass:"w-1/5"},[e._v("單號")]),t("div",{staticClass:"w-1/5"},[e._v("類別")]),t("div",{staticClass:"w-1/5"},[e._v("項目")]),t("div",{staticClass:"w-1/5"},[e._v("金額")]),t("div",{staticClass:"w-1/5"},[e._v("業績")])])},function(){var e=this,t=e._self._c;return t("ul",[t("li",{staticClass:"grid grid-cols-12 border-b border-solid border-primary/50 bg-[#08424c]/80 p-1 text-white"},[t("div",{staticClass:"col-span-6"}),t("div",{staticClass:"col-span-3"},[e._v("日合計")]),t("div",{staticClass:"col-span-3"},[e._v("累計")])])])}],s=(a(7658),a(1283)),o=a(5399),n=a(629),l={name:"priceList-index",description:"報表的設計師日報表",metaInfo:{title:"BeautyOS 設計師",titleTemplate:"%s | 設計師日報表"},data(){return{year:s.Z,month:o.Z,date:"",searchDate:this.$dayjs().valueOf(),reviewResult:{},isDisplayHelperRetrieveInDailyReport:!1,isUsingMathRoundInDesignerDailyReport:!1,isZeroValueHiddenOnDailyReport:!1,priceDisplayOnDailyReportDefault:{}}},mounted(){this.init()},methods:{async init(){await Promise.all([this.getIsDisplayHelperRetrieveInDailyReport(),this.getIsUsingMathRoundInDesignerDailyReport(),this.getIsZeroValueHiddenOnDailyReport(),this.getPriceDisplayOnDailyReportDefault()]).then((()=>{})),await this.getDesignerDailyReport()},async getIsDisplayHelperRetrieveInDailyReport(){const e=await this.$api.getIsDisplayHelperRetrieveInDailyReport(),{data:t,errors:a}=e.data;a||(this.isDisplayHelperRetrieveInDailyReport=t.getIsDisplayHelperRetrieveInDailyReport)},async getIsUsingMathRoundInDesignerDailyReport(){const e=await this.$api.getIsUsingMathRoundInDesignerDailyReport(),{data:t,errors:a}=e.data;a||(this.isUsingMathRoundInDesignerDailyReport=t.getIsUsingMathRoundInDesignerDailyReport)},async getIsZeroValueHiddenOnDailyReport(){const e=await this.$api.getIsZeroValueHiddenOnDailyReport(),{data:t,errors:a}=e.data;a||(this.isZeroValueHiddenOnDailyReport=t.getIsZeroValueHiddenOnDailyReport)},async getPriceDisplayOnDailyReportDefault(){const e=await this.$api.getPriceDisplayOnDailyReportDefault(),{data:t,errors:a}=e.data;a||(this.priceDisplayOnDailyReportDefault=t.getPriceDisplayOnDailyReportDefault)},doRoute(){this.$router.push({name:"Punch"})},async getDesignerDailyReport(){this.totalFakePerformance=0,this.totalTruthPerformance=0;const e=await this.$api.designerDailyReport({date:this.$dayjs(this.searchDate).valueOf(),designerIds:[this.userInfo.user.id]}),{data:t,errors:a}=e.data;return a?[]:(this.reviewResult=Array.isArray(t.designerDailyReport)?t.designerDailyReport:[],this.reviewResult.length>0&&(this.reviewResult=this.reviewResult.map((e=>{let{totalFakePerformance:t=0,totalTruthPerformance:a=0,...i}=e;return i.orderRecord.forEach((e=>{t+=e.fakePerformance,a+=e.truthPerformance})),{totalFakePerformance:t,totalTruthPerformance:a,...i}}))),e)},countMath(e,t){return this.isUsingMathRoundInDesignerDailyReport?Math.round(e,t):(+e/+t).toFixed(1)}},computed:{...(0,n.rn)("userInfo",["userInfo"]),totalCount(){return e=>{const t=(e,t)=>+e+ +t,a=e.map((e=>e.price));return a.length>0?a.reduce(t):0}},currentMM(){let e="";return e=this.searchDate?this.$dayjs(this.searchDate).format("MM"):this.$dayjs(new Date).format("MM"),e},currentDD(){let e="";return e=this.searchDate?this.$dayjs(this.searchDate).format("DD"):this.$dayjs(new Date).format("DD"),e}},watch:{searchDate(){this.getDesignerDailyReport()}}},d=l,c=a(3736),p=(0,c.Z)(d,i,r,!1,null,null,null),u=p.exports}}]);
//# sourceMappingURL=864.9060c63c.js.map