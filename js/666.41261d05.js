"use strict";(self["webpackChunkbos_designer"]=self["webpackChunkbos_designer"]||[]).push([[666],{6666:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("main",{staticClass:"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]"},[t("C-Back-Nav",{attrs:{title:"設計師業績分析報表",routeTarget:{name:"Report"}}}),t("section",{staticClass:"relative z-0 mt-[52px] p-3"},[t("div",{staticClass:"my-4 flex items-center justify-between"},[t("div",[t("p",[t("strong",[e._v("設計師：")]),e._v(" "+e._s(e.designerName+" | "+e.GETTER_MECHANTNAME))])])]),t("div",{staticClass:"flex flex-wrap items-center gap-2"},[t("button",{staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",on:{click:e.thisMonth}},[e._v(" 本月 ")]),t("button",{staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",on:{click:e.lastMonth}},[e._v(" 上個月 ")]),t("button",{staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",on:{click:function(t){return e.setDay(2)}}},[e._v(" 前天 ")]),t("button",{staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",on:{click:function(t){return e.setDay(1)}}},[e._v(" 昨天 ")]),t("button",{staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",on:{click:e.today}},[e._v(" 今天 ")]),t("vc-date-picker",{attrs:{mode:"date","max-date":e.$dayjs().format("YYYY-MM-DD")},scopedSlots:e._u([{key:"default",fn:function({inputValue:r,inputEvents:s}){return[t("input",e._g({staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",attrs:{placeholder:"起始日"},domProps:{value:r}},s))]}}]),model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),t("vc-date-picker",{attrs:{mode:"date","max-date":e.$dayjs().format("YYYY-MM-DD")},scopedSlots:e._u([{key:"default",fn:function({inputValue:r,inputEvents:s}){return[t("input",e._g({staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",attrs:{placeholder:"結束日"},domProps:{value:r}},s))]}}]),model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}}),t("button",{staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",on:{click:function(t){return e.setDisplayReference("TRUTH")}}},[e._v(" 實業績 ")]),t("button",{staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",on:{click:function(t){return e.setDisplayReference("FAKE")}}},[e._v(" 虛業績 ")])],1),t("div",{staticClass:"overflow-x-auto my-3 text-left text-sm"},[t("div",{staticClass:"w-[768px] md:w-full break-words"},[e._m(0),t("div",{staticClass:"mb-1 flex items-center justify-between border-b border-solid border-primary/50 p-1"},[t("div",{staticClass:"w-1/12"},[e._v(e._s(Math.round(e.totalPerformance)))]),t("div",{staticClass:"w-1/12"},[e._v(e._s(Math.round(e.totalOrderCount)))]),t("div",{staticClass:"w-1/12"},[e._v(e._s(Math.round(e.orderAveragePrice)))]),t("div",{staticClass:"w-1/12"},[e._v(e._s(Math.round(e.orderDesignateCount)))]),t("div",{staticClass:"w-1/12"},[e._v(e._s(Math.round(e.orderDesignatePercentage))+"%")]),t("div",{staticClass:"w-1/12"},[e._v(e._s(Math.round(e.orderNonDesignateCount)))]),t("div",{staticClass:"w-1/12"},[e._v(e._s(this.secondDecimalPoint(e.orderNonDesignatePercentage))+"%")]),t("div",{staticClass:"w-1/12"},[e._v(e._s(Math.round(e.productPerformance)))]),t("div",{staticClass:"w-1/12"},[e._v(e._s(this.secondDecimalPoint(e.productPerformancePercentage))+"%")]),t("div",{staticClass:"w-1/12"},[e._v(e._s(Math.round(e.membershipPerformance)))]),t("div",{staticClass:"w-1/12"},[e._v(" "+e._s(this.secondDecimalPoint(e.membershipPerformancePercentage))+"% ")])]),e._m(1),e.isServiceTypeAnalyze?[e._l(e.serviceTypeAnalyzeList,(function(r){return t("div",{key:r.typeName,staticClass:"mb-1 flex items-center justify-between border-b border-solid border-primary/50 p-1"},[t("div",{staticClass:"w-1/12"},[e._v(e._s(r.typeName))]),t("div",{staticClass:"w-1/12"},[e._v(e._s(r.orderTypeCount))]),t("div",{staticClass:"w-1/12"},[e._v(" "+e._s(Math.round(100*(r.orderTypePercentage+Number.EPSILON))/100)+"% ")]),t("div",{staticClass:"w-1/12"},[e._v(e._s(r.orderTypeDesignateCount))]),t("div",{staticClass:"w-1/12"},[e._v(" "+e._s(Math.round(100*(r.orderTypeDesignatePercentage+Number.EPSILON))/100)+"% ")]),t("div",{staticClass:"w-1/12"},[e._v(e._s(r.orderTypeNonDesignateCount))]),t("div",{staticClass:"w-1/12"},[e._v(" "+e._s(Math.round(100*(r.orderTypeNonDesignatePercentage+Number.EPSILON))/100)+"% ")]),t("div",{staticClass:"w-1/12"},[e._v(e._s(Math.round(r.currentOrderTypePerformance))+" ")]),t("div",{staticClass:"w-1/12"},[e._v(" "+e._s(Math.round(100*(r.currentOrderTypePerformancePercentage+Number.EPSILON))/100)+"% ")]),t("div",{staticClass:"w-1/12"},[e._v(e._s(Math.round(r.currentOrderTypeAveragePrice))+" ")])])})),t("div",{staticClass:"mb-1 flex items-center justify-between border-b border-solid border-primary/50 p-1"},[e._m(2),t("div",{staticClass:"w-1/12"},[e._v(" "+e._s(e.getOrderTypeCountTotal)+" ")]),t("div",{staticClass:"w-1/12"},[e._v("100%")]),t("div",{staticClass:"w-1/12"},[e._v(" "+e._s(e.getOrderTypeDesignateCountCountTotal)+" ")]),t("div",{staticClass:"w-1/12"},[e._v(e._s(e.getOrderTypeDesignatePercentageTotal)+"%")]),t("div",{staticClass:"w-1/12"},[e._v(" "+e._s(e.getOrderTypeNonDesignateCountTotal)+" ")]),t("div",{staticClass:"w-1/12"},[e._v(e._s(e.getOrderTypeNonDesignatePercentageTotal)+"%")]),t("div",{staticClass:"w-1/12"},[e._v(" "+e._s(e.getCurrentOrderTypePerformanceTotal)+" ")]),t("div",{staticClass:"w-1/12"},[e._v("100%")]),t("div",{staticClass:"w-1/12"},[e._v(" "+e._s(e.getServiceTypeAnalyzeListTotal)+" ")])])]:t("div",{staticClass:"my-3 flex items-center justify-center border-solid border-primary/50 p-1"},[t("strong",[e._v("尚無資料")])])],2)])])],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"mb-1 flex items-center justify-between border-b border-solid border-primary/50 bg-[#08424c]/80 p-1 text-white"},[t("div",{staticClass:"w-1/12"},[e._v("總業績")]),t("div",{staticClass:"w-1/12"},[e._v("總客數")]),t("div",{staticClass:"w-1/12"},[e._v("平均客單價")]),t("div",{staticClass:"w-1/12"},[e._v("指定數")]),t("div",{staticClass:"w-1/12"},[e._v("指定數%")]),t("div",{staticClass:"w-1/12"},[e._v("不指定數")]),t("div",{staticClass:"w-1/12"},[e._v("不指定%")]),t("div",{staticClass:"w-1/12"},[e._v("店販業績")]),t("div",{staticClass:"w-1/12"},[e._v("店販業績比%")]),t("div",{staticClass:"w-1/12"},[e._v("會員卡業績")]),t("div",{staticClass:"w-1/12"},[e._v("會員卡業績比%")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"mb-1 flex items-center justify-between border-b border-solid border-primary/50 bg-[#08424c]/80 p-1 text-white"},[t("div",{staticClass:"w-1/12"},[e._v("項目")]),t("div",{staticClass:"w-1/12"},[e._v("客數")]),t("div",{staticClass:"w-1/12"},[e._v("客數比%")]),t("div",{staticClass:"w-1/12"},[e._v("指定數")]),t("div",{staticClass:"w-1/12"},[e._v("指定數%")]),t("div",{staticClass:"w-1/12"},[e._v("不指定數")]),t("div",{staticClass:"w-1/12"},[e._v("不指定%")]),t("div",{staticClass:"w-1/12"},[e._v("單項業績")]),t("div",{staticClass:"w-1/12"},[e._v("業績比%")]),t("div",{staticClass:"w-1/12"},[e._v("平均單價")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-1/12"},[t("strong",[e._v("合計")])])}],n=r(629),i=r(1283),o=r(5399),c={name:"priceList-index",description:"報表的設計師業績分析報表",metaInfo:{title:"BeautyOS 設計師",titleTemplate:"%s | 設計師業績分析表"},data(){return{startDate:this.$dayjs().valueOf(),endDate:this.$dayjs().valueOf(),year:i.Z,month:o.Z,displayReference:"TRUTH",designerName:null,totalPerformance:null,totalOrderCount:null,orderAveragePrice:null,orderDesignateCount:null,orderDesignatePercentage:null,orderNonDesignateCount:null,orderNonDesignatePercentage:null,productPerformance:null,productPerformancePercentage:null,membershipPerformance:null,membershipPerformancePercentage:null,isServiceTypeAnalyze:!0,serviceTypeAnalyzeList:[]}},mounted(){this.init()},methods:{async init(){await Promise.all([this.getDesignerPerforamnceAnalyzeReport()]).then((()=>{}))},setDisplayReference(e){this.displayReference=e,this.getDesignerPerforamnceAnalyzeReport()},arrayEmpty(e){return 0===e.length},timeStampFormat(e){const t=new Date(e),r=t.getFullYear().toString(),s=(t.getMonth()+1).toString(),a=t.getDate().toString();return r+s+a},thisMonth(){const e=new Date(Date.now()),t=e.getFullYear(),r=e.getMonth()+1,s=new Date(t,r-1,1);this.startDate=+s,this.endDate=+this.$dayjs().valueOf()},lastMonth(){const e=new Date(Date.now()),t=e.getFullYear(),r=e.getMonth(),s=new Date(t,r-1,1),a=new Date(t,r,0);this.startDate=+s,this.endDate=+a},today(){this.startDate=+this.$dayjs().valueOf(),this.endDate=+this.$dayjs().valueOf()},setDay(e){const t=new Date,r=t.setDate(t.getDate()-e);this.startDate=+r,this.endDate=+r},async getDesignerPerforamnceAnalyzeReport(){const e={startDate:this.$dayjs(this.$dayjs(this.startDate).format("YYYY-MM-DD 00:00:00")).valueOf(),endDate:this.$dayjs(this.$dayjs(this.endDate).format("YYYY-MM-DD 00:00:00")).valueOf()},{displayReference:t}=this,r=this.userInfo.user.id,s=await this.$api.designerPerforamnceAnalyzeReport(e,t,r),{data:a,errors:n}=JSON.parse(JSON.stringify(s.data));n||(a.designerPerforamnceAnalyzeReport[0]&&this.setData(a.designerPerforamnceAnalyzeReport[0]),0===a.designerPerforamnceAnalyzeReport[0].serviceTypeAnalyze.length?this.isServiceTypeAnalyze=!1:(this.isServiceTypeAnalyze=!0,this.serviceTypeAnalyzeList=a.designerPerforamnceAnalyzeReport[0].serviceTypeAnalyze))},setData(e){this.designerName=e.designerName,this.totalPerformance=e.totalPerformance,this.totalOrderCount=e.totalOrderCount,this.orderAveragePrice=e.orderAveragePrice,this.orderDesignateCount=e.orderDesignateCount,this.orderDesignatePercentage=e.orderDesignatePercentage,this.orderNonDesignateCount=e.orderNonDesignateCount,this.orderNonDesignatePercentage=e.orderNonDesignatePercentage,this.productPerformance=e.productPerformance,this.productPerformancePercentage=e.productPerformancePercentage,this.membershipPerformance=e.membershipPerformance,this.membershipPerformancePercentage=e.membershipPerformancePercentage},secondDecimalPoint(e){const t=Math.round(100*(e+Number.EPSILON))/100;return t}},watch:{startDate(){this.startDate&&this.getDesignerPerforamnceAnalyzeReport()},endDate(){this.endDate&&this.getDesignerPerforamnceAnalyzeReport()}},computed:{...(0,n.rn)("userInfo",["userInfo"]),...(0,n.Se)("userInfo",["GETTER_MECHANTNAME"]),getOrderTypeCountTotal(){const e=this.serviceTypeAnalyzeList.reduce(((e,t)=>({orderTypeCount:e.orderTypeCount+t.orderTypeCount})),{orderTypeCount:0}).orderTypeCount;return e},getOrderTypePercentageTotal(){const e=this.serviceTypeAnalyzeList.reduce(((e,t)=>({orderTypePercentage:e.orderTypePercentage+t.orderTypePercentage})),{orderTypePercentage:0}).orderTypePercentage;return this.secondDecimalPoint(e)},getOrderTypeDesignateCountCountTotal(){const e=this.serviceTypeAnalyzeList.reduce(((e,t)=>({orderTypeDesignateCount:e.orderTypeDesignateCount+t.orderTypeDesignateCount})),{orderTypeDesignateCount:0}).orderTypeDesignateCount;return e},getOrderTypeDesignatePercentageTotal(){const e=this.getOrderTypeDesignateCountCountTotal/(this.getOrderTypeDesignateCountCountTotal+this.getOrderTypeNonDesignateCountTotal)*100;return this.secondDecimalPoint(e)},getOrderTypeNonDesignateCountTotal(){const e=this.serviceTypeAnalyzeList.reduce(((e,t)=>({orderTypeNonDesignateCount:e.orderTypeNonDesignateCount+t.orderTypeNonDesignateCount})),{orderTypeNonDesignateCount:0}).orderTypeNonDesignateCount;return e},getOrderTypeNonDesignatePercentageTotal(){const e=this.getOrderTypeNonDesignateCountTotal/(this.getOrderTypeDesignateCountCountTotal+this.getOrderTypeNonDesignateCountTotal)*100;return this.secondDecimalPoint(e)},getCurrentOrderTypePerformanceTotal(){const e=this.serviceTypeAnalyzeList.reduce(((e,t)=>({currentOrderTypePerformance:e.currentOrderTypePerformance+t.currentOrderTypePerformance})),{currentOrderTypePerformance:0}).currentOrderTypePerformance;return Math.round(e)},getCurrentOrderTypePerformancePercentageTotal(){const e=this.serviceTypeAnalyzeList.reduce(((e,t)=>({currentOrderTypePerformancePercentage:e.currentOrderTypePerformancePercentage+t.currentOrderTypePerformancePercentage})),{currentOrderTypePerformancePercentage:0}).currentOrderTypePerformancePercentage;return this.secondDecimalPoint(e)},getServiceTypeAnalyzeListTotal(){const e=this.serviceTypeAnalyzeList.reduce(((e,t)=>({currentOrderTypeAveragePrice:e.currentOrderTypeAveragePrice+t.currentOrderTypeAveragePrice})),{currentOrderTypeAveragePrice:0}).currentOrderTypeAveragePrice;return Math.round(e)}}},d=c,l=r(3736),u=(0,l.Z)(d,s,a,!1,null,null,null),p=u.exports}}]);
//# sourceMappingURL=666.41261d05.js.map