"use strict";(self["webpackChunkbos_designer"]=self["webpackChunkbos_designer"]||[]).push([[83],{8083:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("main",{staticClass:"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]"},[e("C-Back-Nav",{attrs:{title:(""!==t.GETTER_MECHANTNAME?t.GETTER_MECHANTNAME+" - ":"")+"打卡",routeTarget:{name:"Punch"}}}),e("section",{staticClass:"relative z-0 mt-[52px] p-3"},[e("div",{staticClass:"mb-4 flex items-center justify-between gap-2"},[e("month-picker-input",{staticClass:"!w-full",attrs:{lang:"zh","input-pre-filled":!0,"default-month":+this.$dayjs().month()+1,"default-year":+t.$dayjs(new Date).format("YYYY")},on:{change:t.showDate}})],1),Array.isArray(t.ListHasResultAttendanceRecords)&&t.ListHasResultAttendanceRecords.length>0?e("div",{staticClass:"text-sm"},[t._m(0),t._l(t.ListHasResultAttendanceRecords,(function(s,a){return e("div",{key:`resultAttendance${a}`},[e("div",{staticClass:"mt-4 mb-1 text-left text-second"},[t._v(t._s(t._f("dateFmtMMDDdd")(s.date)))]),t._l(s.clockInRecord,(function(a,i){return e("div",{key:`clockInRecordItem${i}`},[a.in?[e("div",{staticClass:"mb-2 flex flex-nowrap gap-1 border-b border-solid border-primary text-left"},[e("div",{staticClass:"w-1/6"},[t._v(t._s(t._f("dateFmtHm")(a.in.time)))]),e("div",{staticClass:"w-2/6 overflow-hidden text-ellipsis text-skyblue"},[t._v(t._s(a.in.latitude||"--")+t._s(a.in.longitude?`,${a.in.longitude}`:",--"))]),e("div",{staticClass:"w-1/6"},[t._v(t._s(s.isLate?"遲到":"成功"))]),e("div",{staticClass:"w-2/6"},[t._v("上班打卡")]),e("div",{staticClass:"w-1/6 text-center",class:{"text-rejectText":s.lateMinutes>0}},[e("div",[t._v(t._s(0===i?s.lateMinutes:"--"))])])])]:t._e(),a.breakRecord?[t._l(a.breakRecord,(function(s,a){return[s.start?e("div",{key:`breakRecordSatrt${a}`,staticClass:"mb-2 flex flex-nowrap gap-1 border-b border-solid border-primary text-left"},[e("div",{staticClass:"w-1/6"},[t._v(t._s(t._f("dateFmtHm")(s.start.time)))]),e("div",{staticClass:"w-2/6 overflow-hidden text-ellipsis text-skyblue"},[t._v(t._s(s.start.latitude||"--")+t._s(s.start.longitude?`,${s.start.longitude}`:",--"))]),e("div",{staticClass:"w-1/6"},[t._v("成功")]),e("div",{staticClass:"w-2/6"},[t._v("外出打卡")]),t._m(1,!0)]):t._e(),s.end?e("div",{key:`breakRecordEnd${a}`,staticClass:"mb-2 flex flex-nowrap gap-1 border-b border-solid border-primary text-left"},[e("div",{staticClass:"w-1/6"},[t._v(t._s(t._f("dateFmtHm")(s.end.time)))]),e("div",{staticClass:"w-2/6 overflow-hidden text-ellipsis text-skyblue"},[t._v(t._s(s.end.latitude||"--")+t._s(s.end.longitude?`,${s.end.longitude}`:",--"))]),e("div",{staticClass:"w-1/6",class:{"text-rejectText":s.end.isLate}},[t._v(" "+t._s(s.end.isLate?"失敗":"成功"))]),e("div",{staticClass:"w-2/6"},[t._v("歸來打卡")]),t._m(2,!0)]):t._e()]}))]:t._e(),a.out?[e("div",{staticClass:"mb-2 flex flex-nowrap gap-1 border-b border-solid border-primary text-left"},[e("div",{staticClass:"w-1/6"},[t._v(t._s(t._f("dateFmtHm")(a.out.time)))]),e("div",{staticClass:"w-2/6 overflow-hidden text-ellipsis text-skyblue"},[t._v(t._s(a.out.latitude||"--")+t._s(a.out.longitude?`,${a.out.longitude}`:",--"))]),e("div",{staticClass:"w-1/6"},[t._v(t._s(s.isLeaveEarly?"早退":"成功"))]),e("div",{staticClass:"w-2/6"},[t._v("下班打卡")]),t._m(3,!0)])]:t._e()],2)}))],2)}))],2):e("div",{staticClass:"mt-3 flex items-center justify-center text-2xl text-second"},[e("p",[t._v("查無資料")])])])],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-nowrap gap-1 border-b border-solid border-primary text-left"},[e("div",{staticClass:"w-1/6"},[t._v("時間")]),e("div",{staticClass:"w-2/6"},[t._v("位置")]),e("div",{staticClass:"w-1/6"},[t._v("狀態")]),e("div",{staticClass:"w-2/6"},[t._v("詳情")]),e("div",{staticClass:"w-1/6 text-center"},[t._v("遲到")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-1/6 text-center"},[e("div",[t._v("--")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-1/6 text-center"},[e("div",[t._v("--")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-1/6 text-center"},[e("div",[t._v("--")])])}],r=(s(7658),s(629)),n=s(4010),d={name:"punch-list",description:"打卡列表",metaInfo:{title:"BeautyOS 設計師",titleTemplate:"%s | 打卡"},components:{MonthPickerInput:n.Jf},data(){return{resultAttendance:[],date:{from:null,to:null,month:null,year:2022}}},mounted(){this.init()},methods:{async init(){await Promise.all([this.getAttendanceRecords()]).then((()=>{}))},async getAttendanceRecords(){const t={userId:this.userInfo.user.id,dateRange:{startDate:this.$dayjs(this.date.from).startOf("month").valueOf(),endDate:this.$dayjs(this.date.to).add(-1,"day").endOf("month").valueOf()},pageLimit:1e3},e=await this.$api.attendanceRecords(t),{data:s,errors:a}=e.data;if(a)return;console.log(s.attendanceRecords[0]);const[i={}]=s.attendanceRecords;this.resultAttendance=i.attendanceRecord?i.attendanceRecord:[]},doRoute(){this.$router.push({name:"Punch"})},showDate(t){this.date=t,this.getAttendanceRecords()}},computed:{...(0,r.rn)("userInfo",["userInfo","currentMechantId"]),...(0,r.Se)("userInfo",["GETTER_MECHANTNAME"]),ListHasResultAttendanceRecords(){const t=this.resultAttendance.filter((t=>Array.isArray(t.clockInRecord)&&t.clockInRecord.length>0));return t}}},l=d,c=s(3736),o=(0,c.Z)(l,a,i,!1,null,"e6673f5e",null),u=o.exports}}]);
//# sourceMappingURL=83.c0ded958.js.map